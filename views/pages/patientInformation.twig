{% extends "../layouts/company.twig" %}

{% block main %}
	<main class="p-10">
		{% if update %}
			<form class="flex flex-col md:gap-3" action="/patients/{{patient.id}}/update" method="post">
				<h2 class="text-2xl text-center pb-5 md:text-3xl 2xl:text-4xl">Modifier les informations du patient sélectionné</h2>
				<div class="flex flex-col">
					<label class="m-auto md:text-2xl 2xl:text-3xl" for="lastName">Nom de famille</label>
					<input class="text-sm md:text-lg 2xl:text-2xl m-auto border border-blue-600 rounded-lg w-70 md:w-80 2xl:w-90 pl-1 shadow-sm shadow-blue-300" type="text" id="lastName" name="lastName" value="{{patient.lastName}}">
				</div>
				<div class="flex flex-col">
					<label class="m-auto md:text-2xl 2xl:text-3xl" for="firstName">Prénom</label>
					<input class="text-sm md:text-lg 2xl:text-2xl m-auto border border-blue-600 rounded-lg w-70 md:w-80 2xl:w-90 pl-1 shadow-sm shadow-blue-300" type="text" id="firstName" name="firstName" value="{{patient.firstName}}">
				</div>
				<p class="text-lg md:text-2xl 2xl:text-3xl text-center italic font-bold mt-5">Adresse du patient</p>
				<div class="flex justify-center gap-2">
					<div class="flex flex-col">
						<label class="m-auto md:text-2xl 2xl:text-3xl" for="streetNumber">N°</label>
						<input class="text-sm md:text-lg 2xl:text-2xl m-auto border border-blue-600 rounded-lg w-20 md:w-30 2xl:w-40 pl-1 shadow-sm shadow-blue-300" type="text" id="streetNumber" name="streetNumber" value="{{patient.streetNumber}}">
					</div>
					<div class="flex flex-col">
						<label class="m-auto md:text-2xl 2xl:text-3xl" for="street">Voie</label>
						<input class="text-sm md:text-lg 2xl:text-2xl m-auto border border-blue-600 rounded-lg w-70 md:w-80 2xl:w-90 pl-1 shadow-sm shadow-blue-300" type="text" id="street" name="street" value="{{patient.street}}">
					</div>
				</div>
				<div class="flex justify-center gap-2">
					<div class="flex flex-col">
						<label class="m-auto md:text-2xl 2xl:text-3xl" for="zipCode">Code postal</label>
						<input class="text-sm md:text-lg 2xl:text-2xl m-auto border border-blue-600 rounded-lg w-30 md:w-40 2xl:w-50 pl-1 shadow-sm shadow-blue-300" type="text" id="zipCode" name="zipCode" value="{{patient.zipCode}}">
					</div>
					<div class="flex flex-col">
						<label class="m-auto md:text-2xl 2xl:text-3xl" for="city">Ville</label>
						<input class="text-sm md:text-lg 2xl:text-2xl m-auto border border-blue-600 rounded-lg w-70 md:w-80 2xl:w-90 pl-1 shadow-sm shadow-blue-300" type="text" id="city" name="city" value="{{patient.city}}">
					</div>
				</div>
				<div class="flex flex-col">
					<label class="m-auto md:text-2xl 2xl:text-3xl" for="tourId">Tournée</label>
					<select class="text-sm md:text-lg 2xl:text-2xl m-auto mt-2 mb-2 border border-blue-600 rounded-lg w-50 md:w-60 2xl:w-70 pl-1 shadow-sm shadow-blue-300" name="tourId" id="tourId">
						{% if patient.tourId == null %}
							<option value="">--Sélectionnez une tournée--</option>
						{% else %}
							<option value="{{patient.tourId}}">{{ tour.name }}</option>
						{% endif %}
						{% for tour in company.tours %}
							{% if tour.id != patient.tourId %}
								<option value="{{tour.id}}">{{ tour.name }}</option>
							{% endif %}
						{% endfor %}
					</select>
				</div>
				<div class="flex justify-center">
					<button class="2xl:text-2xl font-bold m-5 p-2 border rounded-lg w-fit bg-blue-400 hover:bg-blue-200 shadow-sm shadow-blue-600" name="updateYes">Valider</button>
					<button class="2xl:text-2xl font-bold m-5 p-2 border rounded-lg w-fit bg-red-400 hover:bg-red-200 shadow-sm shadow-red-600" name="updateNo">Annuler</button>
				</div>
			</form>
		{% else %}
			<form class="flex flex-col" action="/patients/{{patient.id}}" method="post">
				<h2 class="text-2xl text-center pb-5 md:text-3xl 2xl:text-4xl">Informations du patient sélectionné</h2>
				<h3 class="font-bold m-auto md:text-2xl 2xl:text-3xl">Nom :</h3>
				<p class="m-auto md:text-xl 2xl:text-2xl">{{ patient.lastName }}</p>
				<h3 class="font-bold m-auto md:text-2xl 2xl:text-3xl">Prénom :</h3>
				<p class="m-auto md:text-xl 2xl:text-2xl">{{ patient.firstName }}</p>
				<h3 class="font-bold m-auto md:text-2xl 2xl:text-3xl">Adresse :</h3>
				<p class="m-auto md:text-xl 2xl:text-2xl">{{ patient.streetNumber }}
					{{ patient.street }}</p>
				<p class="m-auto md:text-xl 2xl:text-2xl">{{ patient.zipCode }}
					{{ patient.city }}</p>
				<h3 class="font-bold m-auto md:text-2xl 2xl:text-3xl">Tournée :</h3>
				{% if patient.tourId %}
					<p class="m-auto md:text-xl 2xl:text-2xl">{{ tour.name }}</p>
				{% endif %}
				<button class="2xl:text-2xl font-bold self-center m-auto mt-2 mb-2 p-2 border rounded-lg w-fit bg-blue-400 hover:bg-blue-200 shadow-sm shadow-blue-600" name="update" value="{{patient.id}}">Modifier</button>
			</form>
			<form class="flex flex-col" action="/patients/{{ patient.id }}/delete" method="post">
				<button class="2xl:text-2xl font-bold m-auto mt-2 mb-2 p-2 border rounded-lg w-fit bg-red-400 hover:bg-red-200 shadow-sm shadow-red-600">Supprimer</button>
			</form>
		{% endif %}

		{% if error %}
			<p>{{ error }}</p>
		{% endif %}
	</main>
{% endblock %}
