{% extends "../layouts/company.twig" %}

{% block main %}
	<main class="p-10">
		<section class="flex flex-col gap-5">
			<div class="flex justify-center items-center">
				<h2 class="text-xl text-center 2xl:text-3xl">Liste des tournées</h2>
				<button class="2xl:text-2xl text-lg font-bold m-5 p-2 border rounded-lg w-10 bg-blue-400 hover:bg-blue-200 shadow-sm shadow-blue-600" id="createTour">+</button>
			</div>
			{% for tour in tours %}
				<article class="border rounded-lg pl-5 pr-5 pb-5 bg-blue-200">
					<h3 class="text-lg text-center 2xl:text-2xl">{{ tour.name }}</h3>
					<div class="grid grid-cols-2 gap-2 md:grid-cols-4 lg:grid-cols-5 xl:grid-cols-6 2xl:grid-cols-8">
						{% for patient in tour.patients %}
							<form class="flex flex-col" action="/patients/{{ patient.id }}" method="get">
								<button class="bg-white border border-blue-600 rounded-md h-15 font-bold">{{ patient.lastName }}
									{{ patient.firstName }}</button>
							</form>
						{% endfor %}
					</div>
				</article>
			{% endfor %}

			<dialog class="border border-blue-600 rounded-lg shadow-sm shadow-blue-300 absolute m-auto w-2xl" id="tourModal">	
				<form class="flex flex-col items-center md:gap-3" action="/tours/add" method="post">
				<button class="2xl:text-2xl self-end border rounded-md w-8 mt-2 mr-2 bg-red-400 hover:bg-red-200 shadow-sm shadow-red-600 font-bold closeModal">X</button>
					<label class="m-auto md:text-lg 2xl:text-3xl" for="name">Nom de la tournée</label>
					<input class="text-sm md:text-lg 2xl:text-2xl m-auto border border-blue-600 rounded-lg w-70 md:w-90 2xl:w-100 pl-1 shadow-sm shadow-blue-300" type="text" id="name" name="name">
					<button class="2xl:text-2xl font-bold m-auto mt-2 mb-2 p-2 border rounded-lg w-fit bg-blue-400 hover:bg-blue-200 shadow-sm shadow-blue-600">Créer la tournée</button>
				</form>
			</dialog>
		</section>
	</main>
{% endblock %}

{% block script %}
	<script src="/static/scripts/allTours.js"></script>
{% endblock %}
